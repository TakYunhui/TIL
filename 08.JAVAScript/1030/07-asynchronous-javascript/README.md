# 비동기 JS
## 동기 
- 작업이 순차적으로 이어짐
- 메인 작업이 모두 수행되어야 마지막 작업 수행
- 함수 작업이 완료될 때까지 기다렸다가 값을 반환해야 계속 진행 (동기 함수)
## 비동기
- 프로그램 실행 흐름이 순차적이지 않음
- 작업 완료를 기다리지 않고 다음 작업이 실행되는 방식 
- 병렬적 수행 : 당장 처리를 완료할 수 없는 시간이 필요한 작업들은 별도로 요청을 보낸 뒤 응답이 빨리 오는 작업부터 처리 
(예시)
1. Gmail에서 메일 전송을 누르면 목록 화면으로 전환되지만 실제로 메일을 보내는 작업은 병렬적으로 별도 처리
2. 브라우저는 웹페이지를 먼저 처리되는 요소부터 그려 나가며 처리가 오래 걸리는 것들은 별도로 처리가 완료되는 대로 별도 처리

## JS: Single Thread
- Thread: 작업을 처리할 때 실제로 작업을 수행하는 주체
- 한 번에 여러 일을 수행할 수 없다 
- Runtime 환경(브라우저 또는 Node)을 통해 비동기적 처리 진행
```
[브라우저 JS 비동기 처리 관련 요소]
1. Call Stack : Single Thread 작업 처리
2. Web API : 시간이 소요되는 작업(setTimeout, DOM Event, AJAX 요청)
3. Task Queue : 비동기 처리된 Callback 함수가 대기하는 큐(FIFO)
4. Event Loop : 작업이 들어오면 이를 처리하고, 처리할 태스크가 없으면 잠든다 
```

### AJAX
- Asynchronous JS + XML
- 비동기 JS + XML 객체를 활용해 웹 페이지의 일부분만을 비동기적으로 업데이트
- X가 XML을 의미하나 요즘은 가벼운 용량의 JSHON을 더 많이 다룸(우리도...)

#### 이벤트 핸들러는 비동기 프로그래밍의 한 형태
- 이벤트가 발생할 때마다 호출되는 함수(콜백 함수)제공
- HTTP 요청은 응답이 올 대까지 시간이 걸릴 수 있는 작업이라 비동기 API, 
- 이벤트 핸들러를 XHR(XML) 객체에 연결해 요청의 진행 상태 및 최종 완료에 대한 응답을 받음

### Axios
- JS에서 사용되는 HTTP 클라이언트 라이브러리 
- Python의 경우, requests 역할
- 서버와의 HTTP 요청과 응답을 간편하게 처리하도록 도와주는 도구
```js
axios({
  method: 'post',
  url: '/user/12345',
  data: {
    firstName: 'Fred',
    lastName: 'Flintstone'
  }
})
.then(요청에 성공하면 수행할 콜백함수)
.catch(요청에 실패하면 수행할 콜백함수)
```
- 브라우저에서 비동기로 데이터 통신을 가능하게 하는 라이브러리
- 브라우저를 위해 XMLHttpRequest 생성
- 같은 방식으로 DRF로 만든 API 서버로 요청을 보내서 데이터를 받아온 후 처리

### Callback과 Promise
- 비동기 처리 단점: 작업이 완료되는 순서에 따라 처리하여 코드의 실행 순서 보장 X
- 비동기 작업을 순차적으로 하고 싶다! 
#### 비동기 콜백
- 연쇄적으로 발생하는 비동기 작업을 순차적으로 동작할 수 있게 함
- 작업의 순서와 동작을 제어하거나 결과를 처리하는 데 사용
- 한계 : Callback Hell
- 비동기 콜백 함수는 어떤 기능의 실행 결과를 받아 다른 기능을 수행, 이것이 이어지다보니 파멸의 피라미드가 됨
- 이를 해결하기 위해 나온 것이 Promise
#### Promise
- JS에서 비동기 작업의 결과를 나타내는 객체
- 작업이 끝나면 실행 시켜주겠다는 약속
- 성공에 대한 약속 .then()
- 실패에 대한 약속 .catch()
- .then() chaining -> 앞의 then 실행이 끝나고, 뒤의 then 실행 
- 수직 방향으로 처리 순서 부여 
- 이어서 가려면 반드시 앞 쪽의 then에 return이 있어야 한다 


## 비동기를 사용하는 이유 - 사용자 경험
- 아주 큰 데이터를 불러온 뒤 실행되는 앱이 있을 때, 앱이 멈춘 것과 같은 경험을 겪게 된다
- 이런 경험을 없애줌